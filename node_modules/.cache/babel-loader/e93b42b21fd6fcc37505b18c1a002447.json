{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Bhargav Ayare/Documents/GitHub/invoice2/node_modules/@babel/runtime/regenerator/index.js\";\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { cloneNode } from './cloneNode';\nimport { embedImages } from './embedImages';\nimport { applyStyleWithOptions } from './applyStyleWithOptions';\nimport { embedWebFonts, getWebFontCSS } from './embedWebFonts';\nimport { getNodeWidth, getNodeHeight, getPixelRatio, createImage, canvasToBlob, nodeToDataURL } from './util';\nfunction getImageSize(node) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var width = options.width || getNodeWidth(node);\n  var height = options.height || getNodeHeight(node);\n  return {\n    width: width,\n    height: height\n  };\n}\nexport function toSvg(node) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var _getImageSize, width, height;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _getImageSize = getImageSize(node, options), width = _getImageSize.width, height = _getImageSize.height;\n            return _context.abrupt(\"return\", Promise.resolve(node).then(function (nativeNode) {\n              return cloneNode(nativeNode, options, true);\n            }).then(function (clonedNode) {\n              return embedWebFonts(clonedNode, options);\n            }).then(function (clonedNode) {\n              return embedImages(clonedNode, options);\n            }).then(function (clonedNode) {\n              return applyStyleWithOptions(clonedNode, options);\n            }).then(function (clonedNode) {\n              return nodeToDataURL(clonedNode, width, height);\n            }));\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\nvar dimensionCanvasLimit = 16384; // as per https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas#maximum_canvas_size\nfunction checkCanvasDimensions(canvas) {\n  if (canvas.width > dimensionCanvasLimit || canvas.height > dimensionCanvasLimit) {\n    if (canvas.width > dimensionCanvasLimit && canvas.height > dimensionCanvasLimit) {\n      if (canvas.width > canvas.height) {\n        canvas.height *= dimensionCanvasLimit / canvas.width;\n        canvas.width = dimensionCanvasLimit;\n      } else {\n        canvas.width *= dimensionCanvasLimit / canvas.height;\n        canvas.height = dimensionCanvasLimit;\n      }\n    } else if (canvas.width > dimensionCanvasLimit) {\n      canvas.height *= dimensionCanvasLimit / canvas.width;\n      canvas.width = dimensionCanvasLimit;\n    } else {\n      canvas.width *= dimensionCanvasLimit / canvas.height;\n      canvas.height = dimensionCanvasLimit;\n    }\n  }\n}\nexport function toCanvas(node) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", toSvg(node, options).then(createImage).then(function (img) {\n              var canvas = document.createElement('canvas');\n              var context = canvas.getContext('2d');\n              var ratio = options.pixelRatio || getPixelRatio();\n              var _getImageSize2 = getImageSize(node, options),\n                width = _getImageSize2.width,\n                height = _getImageSize2.height;\n              var canvasWidth = options.canvasWidth || width;\n              var canvasHeight = options.canvasHeight || height;\n              canvas.width = canvasWidth * ratio;\n              canvas.height = canvasHeight * ratio;\n              if (!options.skipAutoScale) {\n                checkCanvasDimensions(canvas);\n              }\n              canvas.style.width = \"\".concat(canvasWidth);\n              canvas.style.height = \"\".concat(canvasHeight);\n              if (options.backgroundColor) {\n                context.fillStyle = options.backgroundColor;\n                context.fillRect(0, 0, canvas.width, canvas.height);\n              }\n              context.drawImage(img, 0, 0, canvas.width, canvas.height);\n              return canvas;\n            }));\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n}\nexport function toPixelData(node) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var _getImageSize3, width, height;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _getImageSize3 = getImageSize(node, options), width = _getImageSize3.width, height = _getImageSize3.height;\n            return _context3.abrupt(\"return\", toCanvas(node, options).then(function (canvas) {\n              var ctx = canvas.getContext('2d');\n              return ctx.getImageData(0, 0, width, height).data;\n            }));\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n}\nexport function toPng(node) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            return _context4.abrupt(\"return\", toCanvas(node, options).then(function (canvas) {\n              return canvas.toDataURL();\n            }));\n          case 1:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n}\nexport function toJpeg(node) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            return _context5.abrupt(\"return\", toCanvas(node, options).then(function (canvas) {\n              return canvas.toDataURL('image/jpeg', options.quality || 1);\n            }));\n          case 1:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n}\nexport function toBlob(node) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            return _context6.abrupt(\"return\", toCanvas(node, options).then(canvasToBlob));\n          case 1:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n}\nexport function getFontEmbedCSS(node) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            return _context7.abrupt(\"return\", getWebFontCSS(node, options));\n          case 1:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n}","map":{"version":3,"mappings":"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","names":["cloneNode","embedImages","applyStyleWithOptions","embedWebFonts","getWebFontCSS","getNodeWidth","getNodeHeight","getPixelRatio","createImage","canvasToBlob","nodeToDataURL","getImageSize","node","options","width","height","toSvg","Promise","resolve","then","nativeNode","clonedNode","dimensionCanvasLimit","checkCanvasDimensions","canvas","toCanvas","img","document","createElement","context","getContext","ratio","pixelRatio","canvasWidth","canvasHeight","skipAutoScale","style","backgroundColor","fillStyle","fillRect","drawImage","toPixelData","ctx","getImageData","data","toPng","toDataURL","toJpeg","quality","toBlob","getFontEmbedCSS"],"sources":["../src/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}